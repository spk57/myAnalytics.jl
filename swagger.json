{
  "openapi": "3.0.0",
  "info": {
    "title": "myAnalytics API",
    "description": "A simple API for analytics operations including structural state space learning analysis",
    "version": "0.0.1",
    "contact": {
      "name": "API Support"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8001",
      "description": "Development server"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Returns the health status of the API server, including uptime and version information.",
        "tags": ["Monitoring"],
        "responses": {
          "200": {
            "description": "Server is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                },
                "example": {
                  "status": "healthy",
                  "timestamp": "2025-11-12T10:30:00.123",
                  "version": "0.0.1",
                  "uptime_seconds": 3600,
                  "service": "myAnalytics.jl"
                }
              }
            }
          }
        }
      }
    },
    "/api/logger": {
      "post": {
        "summary": "Create Log Entry",
        "description": "Creates a new log entry with datetime, name, value, and source information.",
        "tags": ["Logging"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LogEntryRequest"
              },
              "example": {
                "datetime": "2025-01-01T10:30:00",
                "name": "temperature",
                "value": 23.5,
                "source": "sensor-01"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Log entry created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LogEntryResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing required fields or invalid format",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "Retrieve Log Entries",
        "description": "Retrieves log entries with optional filtering and pagination.",
        "tags": ["Logging"],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of entries to return",
            "schema": {
              "type": "integer",
              "default": 100
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Number of entries to skip",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "source",
            "in": "query",
            "description": "Filter by source",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "name",
            "in": "query",
            "description": "Filter by name",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Log entries retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LogEntriesResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/logger/stats": {
      "get": {
        "summary": "Get Logger Statistics",
        "description": "Returns statistics about logged entries including total count and unique sources/names.",
        "tags": ["Logging"],
        "responses": {
          "200": {
            "description": "Statistics retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LogStatsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/getssl": {
      "post": {
        "summary": "Structural State Space Learning Analysis",
        "description": "Performs structural state space learning analysis on a list of prices. Returns predictions, fitted values, statistics, and component analysis including level, trend, and seasonal components.",
        "tags": ["Analytics"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GetSSLRequest"
              },
              "example": {
                "prices": [100.0, 102.5, 101.0, 103.5, 105.0, 104.0, 106.5, 108.0, 107.5, 109.0, 110.0, 111.5, 112.0, 113.5, 115.0, 114.0, 116.5, 118.0, 117.5, 119.0]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Analysis completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetSSLResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Missing 'prices' field in request"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "GetSSLRequest": {
        "type": "object",
        "required": ["prices"],
        "properties": {
          "prices": {
            "type": "array",
            "items": {
              "type": "number",
              "format": "double"
            },
            "description": "Array of price values. Minimum 10 values required for analysis.",
            "minItems": 10,
            "example": [100.0, 102.5, 101.0, 103.5, 105.0, 104.0, 106.5, 108.0, 107.5, 109.0]
          }
        }
      },
      "GetSSLResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "Whether the analysis was successful"
          },
          "message": {
            "type": "string",
            "description": "Status message"
          },
          "predicted": {
            "type": "array",
            "items": {
              "type": "number",
              "format": "double"
            },
            "description": "Predicted values for the next 20 steps"
          },
          "fitted": {
            "type": "array",
            "items": {
              "type": "number",
              "format": "double"
            },
            "description": "Fitted values from the model"
          },
          "stats": {
            "$ref": "#/components/schemas/Statistics"
          },
          "level": {
            "type": "array",
            "items": {
              "type": "number",
              "format": "double"
            },
            "description": "Level component of the time series"
          },
          "slope": {
            "type": "array",
            "items": {
              "type": "number",
              "format": "double"
            },
            "description": "Slope component of the time series"
          },
          "trend": {
            "type": "array",
            "items": {
              "type": "number",
              "format": "double"
            },
            "description": "Trend component (level + slope)"
          },
          "seasonal_week": {
            "type": "array",
            "items": {
              "type": "number",
              "format": "double"
            },
            "description": "Weekly seasonal component"
          },
          "seasonal_month": {
            "type": "array",
            "items": {
              "type": "number",
              "format": "double"
            },
            "description": "Monthly seasonal component (only present if data has more than 40 points)"
          }
        }
      },
      "Statistics": {
        "type": "object",
        "properties": {
          "mean": {
            "type": "number",
            "format": "double",
            "description": "Mean of the price values"
          },
          "std": {
            "type": "number",
            "format": "double",
            "description": "Standard deviation of the price values"
          },
          "max": {
            "type": "number",
            "format": "double",
            "description": "Maximum price value"
          },
          "min": {
            "type": "number",
            "format": "double",
            "description": "Minimum price value"
          },
          "return": {
            "type": "number",
            "format": "double",
            "description": "Percentage return from first to last price"
          },
          "swmax": {
            "type": "number",
            "format": "double",
            "description": "Weekly seasonal maximum range"
          },
          "swmaxd": {
            "type": "integer",
            "description": "Day index of weekly seasonal maximum"
          },
          "swmind": {
            "type": "integer",
            "description": "Day index of weekly seasonal minimum"
          },
          "smmax": {
            "type": "number",
            "format": "double",
            "description": "Monthly seasonal maximum range (only present if data has more than 40 points)"
          },
          "smmaxd": {
            "type": "integer",
            "description": "Day index of monthly seasonal maximum (only present if data has more than 40 points)"
          },
          "smmind": {
            "type": "integer",
            "description": "Day index of monthly seasonal minimum (only present if data has more than 40 points)"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "description": "Error message describing what went wrong"
          }
        }
      },
      "HealthResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": ["healthy", "unhealthy"],
            "description": "Overall health status of the service"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "Current server timestamp"
          },
          "version": {
            "type": "string",
            "description": "API version"
          },
          "uptime_seconds": {
            "type": "integer",
            "description": "Server uptime in seconds since start"
          },
          "service": {
            "type": "string",
            "description": "Service name"
          }
        }
      },
      "LogEntryRequest": {
        "type": "object",
        "required": ["datetime", "name", "value", "source"],
        "properties": {
          "datetime": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of the log entry (ISO 8601 format)",
            "example": "2025-01-01T10:30:00"
          },
          "name": {
            "type": "string",
            "description": "Name/identifier of the log entry",
            "example": "temperature"
          },
          "value": {
            "description": "Value to be logged (can be number, string, boolean, etc.)",
            "oneOf": [
              {"type": "number"},
              {"type": "string"},
              {"type": "boolean"}
            ],
            "example": 23.5
          },
          "source": {
            "type": "string",
            "description": "Source/origin of the log entry",
            "example": "sensor-01"
          }
        }
      },
      "LogEntryResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Log entry created successfully"
          },
          "id": {
            "type": "integer",
            "description": "ID of the created log entry"
          }
        }
      },
      "LogEntriesResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "entries": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/LogEntry"
            }
          },
          "total": {
            "type": "integer",
            "description": "Total number of entries matching the filter"
          },
          "limit": {
            "type": "integer",
            "description": "Maximum number of entries returned"
          },
          "offset": {
            "type": "integer",
            "description": "Number of entries skipped"
          }
        }
      },
      "LogEntry": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "Unique entry ID"
          },
          "datetime": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of the log entry"
          },
          "name": {
            "type": "string",
            "description": "Name/identifier"
          },
          "value": {
            "description": "Logged value"
          },
          "source": {
            "type": "string",
            "description": "Source/origin"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the entry was created in the system"
          }
        }
      },
      "LogStatsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "total_entries": {
            "type": "integer",
            "description": "Total number of log entries"
          },
          "unique_sources": {
            "type": "integer",
            "description": "Number of unique sources"
          },
          "unique_names": {
            "type": "integer",
            "description": "Number of unique names"
          },
          "sources": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of unique sources"
          },
          "names": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of unique names"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Analytics",
      "description": "Analytics endpoints for data analysis"
    },
    {
      "name": "Logging",
      "description": "Data logging and retrieval endpoints"
    },
    {
      "name": "Monitoring",
      "description": "Health check and monitoring endpoints"
    }
  ]
}

